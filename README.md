# Kubecon Infrastructure Demo
This document will contain a basic explanation of how to utilize them demo and some of the ideas it represents. This document assumes the user is proficient with Harbor and can configure the external networking stack to accomodate. 

## Required Tools
kubectl cosign helm terraform kubectx kubecm ytt yq

# TOC

# Demo Equipment List

# Full-Stack Definition

# Installation

## Concepts

## Network Configuration Considerations

### VLANs

### DHCP


## Harvester Configuration

## Infrastructure Paving

### Harbor
As everything in the Rancher stack sans Harvester, Gitea, and Harbor itself will need a registy and helm chart repo, there's a good amount of images that need to be uploaded into the infrastructure instance of Harbor (harbor.mustafar.lol). 
There are multiple Makefile targets built around pulling all of these images and pushing the images into Harbor. Ideally, when setting up a PoC instance, the images can be preloaded onto permanent storage and uploaded to Harbor to avoid having to download the images on public internet (about 33gb total).

Projects in Harbor should all be public for convenience, they are listed here:
* goharbor
* grafana
* hashicorp
* jetstack
* kubewarden
* longhornio
* rancher

Under `bootstrap/rancher` there is a list of tarballs that should be uploaded (the rancher one can be skipped). The list of charts to uplaod mapped to their project are here:
* cert-manager => jetstack
* consul => hashicorp
* kubewarden => kubewarden
* loki-stack => grafana
* longhorn => longhornio
* neuvector => rancher
* rancher => rancher
* vault => hashicorp

The container images can be acquired from the `Makefile` targets:
* pull-rke2
* pull-rancher
* pull-misc

The images generated by those targets will be located in `/tmp` directory and can be uploaded using `make push-images HARBOR_PASSWORD='harbor-password' IMAGES_FILE='/tmp/imagefile.tar.gz`. These images should be copied to a hard-storage that can be reused so they don't need to be redownloaded. The image files are named below:
* rke2-images.tar.gz
* cert-manager-images.tar.gz
* rancher-images.tar.gz
* harbor-images.tar.gz 
* longhorn-images.tar.gz 
* loki-images.tar.gz 
* hashicorp-images.tar.gz 



### Gitea

## Rancher Manager Installation